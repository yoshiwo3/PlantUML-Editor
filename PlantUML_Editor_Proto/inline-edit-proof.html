<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç·¨é›† - å‹•ä½œè¨¼æ˜</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }
        .action-item {
            display: flex;
            gap: 10px;
            padding: 15px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin: 10px 0;
            align-items: center;
        }
        .drag-handle {
            cursor: move;
            font-size: 20px;
            color: #666;
        }
        select, input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        input.message {
            flex: 1;
            min-width: 200px;
        }
        button {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        .delete-btn {
            background: #f44336;
            color: white;
        }
        .delete-btn:hover {
            background: #d32f2f;
        }
        .condition-btn {
            background: #2196F3;
            color: white;
        }
        .condition-btn:hover {
            background: #1976D2;
        }
        .add-btn {
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            margin: 20px 0;
        }
        .add-btn:hover {
            background: #45a049;
        }
        #output {
            background: #333;
            color: #0f0;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            white-space: pre;
            margin-top: 20px;
        }
        .status {
            background: #4CAF50;
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ¯ ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç·¨é›†æ©Ÿèƒ½ - å®Ÿéš›ã«å‹•ä½œã™ã‚‹è¨¼æ˜</h1>
    
    <div class="status">
        âœ… ã“ã®ãƒšãƒ¼ã‚¸ã¯å®Ÿéš›ã«å‹•ä½œã—ã¾ã™ã€‚ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’è©¦ã—ã¦ãã ã•ã„ã€‚
    </div>

    <button class="add-btn" onclick="addAction()">â• ã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ </button>

    <div id="actions-container">
        <div class="action-item">
            <span class="drag-handle">â˜°</span>
            <select class="actor-from">
                <option>Alice</option>
                <option>Bob</option>
                <option>System</option>
            </select>
            <select class="arrow-type">
                <option value="->">â†’ (åŒæœŸ)</option>
                <option value="->>">->> (éåŒæœŸ)</option>
                <option value="-->">--> (è¿”ç­”)</option>
            </select>
            <select class="actor-to">
                <option>Bob</option>
                <option>Alice</option>
                <option>System</option>
            </select>
            <input type="text" class="message" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›" value="Hello">
            <button class="delete-btn" onclick="deleteAction(this)">ğŸ—‘ï¸ å‰Šé™¤</button>
            <button class="condition-btn" onclick="addCondition(this)">ğŸ”€ æ¡ä»¶</button>
        </div>
    </div>

    <button class="add-btn" onclick="convertToPlantUML()" style="background: #FF9800;">
        ğŸ“ PlantUMLå¤‰æ›
    </button>

    <div id="output"></div>

    <script>
        // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ æ©Ÿèƒ½ï¼ˆå®Ÿéš›ã«å‹•ä½œï¼‰
        function addAction() {
            const container = document.getElementById('actions-container');
            const newAction = document.createElement('div');
            newAction.className = 'action-item';
            newAction.innerHTML = `
                <span class="drag-handle">â˜°</span>
                <select class="actor-from">
                    <option>Alice</option>
                    <option>Bob</option>
                    <option>System</option>
                </select>
                <select class="arrow-type">
                    <option value="->">â†’ (åŒæœŸ)</option>
                    <option value="->>">->> (éåŒæœŸ)</option>
                    <option value="-->">--> (è¿”ç­”)</option>
                </select>
                <select class="actor-to">
                    <option>Bob</option>
                    <option>Alice</option>
                    <option>System</option>
                </select>
                <input type="text" class="message" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›">
                <button class="delete-btn" onclick="deleteAction(this)">ğŸ—‘ï¸ å‰Šé™¤</button>
                <button class="condition-btn" onclick="addCondition(this)">ğŸ”€ æ¡ä»¶</button>
            `;
            container.appendChild(newAction);
            
            // å‹•ä½œç¢ºèªãƒ­ã‚°
            console.log('âœ… ã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ æˆåŠŸ:', new Date().toLocaleTimeString());
            showNotification('ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã¾ã—ãŸ');
        }

        // å‰Šé™¤æ©Ÿèƒ½ï¼ˆå®Ÿéš›ã«å‹•ä½œï¼‰
        function deleteAction(button) {
            if (confirm('ã“ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                const item = button.closest('.action-item');
                item.style.transition = 'opacity 0.3s';
                item.style.opacity = '0';
                setTimeout(() => {
                    item.remove();
                    console.log('âœ… ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å‰Šé™¤æˆåŠŸ:', new Date().toLocaleTimeString());
                    showNotification('ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã—ã¾ã—ãŸ');
                }, 300);
            }
        }

        // æ¡ä»¶è¿½åŠ ï¼ˆãƒ‡ãƒ¢ï¼‰
        function addCondition(button) {
            alert('æ¡ä»¶åˆ†å²æ©Ÿèƒ½ï¼šä»Šå¾Œå®Ÿè£…äºˆå®š\nç¾åœ¨ã¯åŸºæœ¬æ©Ÿèƒ½ã®ã¿å‹•ä½œç¢ºèª');
            console.log('â„¹ï¸ æ¡ä»¶æ©Ÿèƒ½ã¯æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºã§å®Ÿè£…');
        }

        // PlantUMLå¤‰æ›ï¼ˆå®Ÿéš›ã«å‹•ä½œï¼‰
        function convertToPlantUML() {
            const actions = document.querySelectorAll('.action-item');
            let uml = '@startuml\n';
            
            actions.forEach((action, index) => {
                const from = action.querySelector('.actor-from').value;
                const arrow = action.querySelector('.arrow-type').value;
                const to = action.querySelector('.actor-to').value;
                const message = action.querySelector('.message').value || `ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸${index + 1}`;
                
                uml += `${from} ${arrow} ${to}: ${message}\n`;
            });
            
            uml += '@enduml';
            
            // çµæœã‚’è¡¨ç¤º
            document.getElementById('output').textContent = uml;
            console.log('âœ… PlantUMLå¤‰æ›æˆåŠŸ:', new Date().toLocaleTimeString());
            showNotification('PlantUMLã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã—ãŸ');
        }

        // é€šçŸ¥è¡¨ç¤º
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #4CAF50;
                color: white;
                padding: 15px 25px;
                border-radius: 5px;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                animation: slideIn 0.3s;
                z-index: 1000;
            `;
            notification.textContent = 'âœ… ' + message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }

        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾©
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã®ç¢ºèª
        window.addEventListener('load', () => {
            console.log('âœ… ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†');
            console.log('âœ… ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒå‹•ä½œå¯èƒ½ã§ã™');
            console.log('ğŸ“ å‹•ä½œç¢ºèªæ™‚åˆ»:', new Date().toLocaleString());
        });
    </script>
</body>
</html>